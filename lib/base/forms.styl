// ESN Landscape

// General styles

// Make all forms have space below them
form
  margin: 0 0 $base-line-height

fieldset
  padding: 0
  margin: 0
  border: 0

// Groups of fields with labels on top (legends)
legend
  display: block
  width: 100%
  padding: 0
  margin-collapse: separate
  if $form-legend-margin is a 'function'
    $form-legend-margin()
  else if $form-legend-margin-bottom is a 'unit'
    margin-bottom: $form-legend-margin-bottom
  else
    margin-bottom: ($base-line-height * 1.5)

  // Font size
  if $form-legend-font-size is a 'unit'
    font-size: $form-legend-font-size
  else
    font-size: ($base-font-size * 1.5)

  // Line height
  if $form-legend-line-height is a 'unit'
    line-height: $form-legend-line-height
  else
    line-height: ($base-line-height * 2)
  
  // Color
  if $form-legend-color is a 'color'
    color: $form-legend-color
  
  // Border
  if $form-legend-border is a 'function'
    $form-legend-border()
  else if $form-legend-border-bottom is a 'unit'
    border: 0
    border-bottom: $form-legend-border-bottom

// Set font for forms
label,
input,
button,
select,
textarea
  font-sans-serif($base-font-size, normal, $base-line-height)

// Add some left margin to some elements following others
input,
button,
select,
textarea
  + label
  + input,
  + button,
  + select,
  + textarea,
  + .btn,
  + .btn-group
    // Consecutive margin
    if $form-consecutive-margin is a 'unit'
      margin-left: $form-consecutive-margin
    else
      margin-left: .4em

// Identify controls by their labels
label
  display: block
  margin-bottom: 5px
  if $form-label-color is a 'color'
    color: $form-label-color

// Inputs, Textareas, Selects
input,
textarea,
select,
.uneditable-input
  display: inline-block
  if $form-input-line-height is a 'unit'
    height: $form-input-line-height
  else
    height: $base-line-height

  // Width
  if $form-input-width is a 'unit'
    width: $form-input-width

  // Padding
  if $form-input-padding is a 'unit'
    padding: $form-input-padding

  // Margin
  if $form-input-margin is a 'function'
    $form-input-margin()
  else if $form-input-margin is a 'unit'
    margin: $form-input-margin

  // Font size
  if $form-input-font-size is a 'unit'
    font-size: $form-input-font-size
  else
    font-size: $base-font-size

  // Line height
  if $form-input-line-height is a 'unit'
    line-height: $form-input-line-height
  else
    line-height: $base-line-height

  // Color
  if $form-input-color is a 'color'
    color: $form-input-color

  // Border
  if $form-input-border is a 'function'
    $form-input-border()
  else if $form-input-border is a 'unit'
    border: $form-input-border

  // Border radius
  if $form-input-border-radius is a 'unit'
    border-radius: $form-input-border-radius

input
  // Mini reset for unique input types
  &[type=image],
  &[type=checkbox],
  &[type=radio]
    width: auto
    height: auto
    padding: 0
    margin: 3px 0
    *margin-top: 0 // IE6-7
    line-height: normal
    border: none
    cursor: pointer  

  // Reset the file input to browser defaults
  &[type=file]
    padding: initial
    line-height: initial
    border: initial
    background-color: #fff
    background-color: initial
    box-shadow: none

  // Help out input buttons
  &[type=button],
  &[type=reset],
  &[type=submit]
    width: auto
    height: auto

// Set the height of select and file controls to match text inputs
select,
input[type=file]
  height: ($base-line-height * 1.5) // In IE7, the height of the select element cannot be changed by height, only font-size
  *margin-top: 4px /* For IE7, add top margin to align select with labels */
  line-height: ($base-line-height * 1.5)

// Chrome on Linux and Mobile Safari need background-color
select
  vertical-align: middle

  // Width
  if $form-select-width is a 'unit'
    width: $form-select-width

  // Background
  if $form-select-background is a 'function'
    $form-select-background()
  else if $form-select-background is a 'color'
    background-color: $form-select-background
  else if $form-select-background is defined
    background: $form-select-background

  // Make multiple select elements height not fixed
  &[multiple],
  &[size]
    height: inherit

// Remove shadow from image inputs
input[type=image]
  box-shadow: none

textarea
  height: auto

// Checkboxes & radios

// Indent the labels to position radios/checkboxes as hanging
.radio,
.checkbox
  padding-left: 18px

.radio input[type=radio],
.checkbox input[type=checkbox]
  float: left
  margin-left: -18px

// Move the options list down to align with labels
.controls
  > .radio:first-child,
  > .checkbox:first-child
    padding-top: 6px // has to be padding because margin collaspes

// Radios and checkboxes on same line
.radio.inline,
.checkbox.inline
  display: inline-block
  margin-bottom: 0
  + .radio.inline,
  + .checkbox.inline
    margin-left: 10px // space out consecutive inline controls

// Focus state

input,
textarea
  // Box shadow
  if $form-input-inner-shadow is defined
    box-shadow: $form-input-inner-shadow

  // Transition
  if $form-input-transition is defined
    transition: $form-input-transition

  &.focused,
  &:focus
    outline: 0

    // Border
    if $form-input-focus-border is a 'color'
      border-color: $form-input-focus-border
    else if $form-input-focus-border is defined
      border: $form-input-focus-border

    // Box shadow
    if $form-input-focus-shadow is defined
      box-shadow: $form-input-focus-shadow
    

input[type=file]:focus,
input[type=checkbox]:focus,
select:focus
  box-shadow: none // override for file inputs
  outline: 1px dotted #666 // Selet elements don't get box-shadow styles, so instead we do outline

// Input sizes

// General classes for quick sizes
.input-mini
  width: 60px
.input-small
  width: 90px
.input-medium
  width: 150px
.input-large
  width: 210px
.input-xlarge
  width: 270px
.input-xxlarge
  width: 530px

// Grid style input sizes
input[class*="span"],
select[class*="span"],
textarea[class*="span"],
.uneditable-input
  float: none
  margin-left: 0

input,
textarea,
.uneditable-input
  // Default columns
  for $col in 1..$grid-columns
    &.span{$col}
      input-columns($col)

select
  for $col in 1..$grid-columns
    &.span{$col}
      select-columns($col)

// Disabled state

// Disabled and read-only inputs
input, select, textarea,
  &[disabled],
  &[readonly]
    background-color: #f5f5f5
    border-color: #ddd
    cursor: not-allowed

// Form field feedback states

// Mixin for form field states
form-field-state($color = #555, $border-color = #ccc, $background-color = #f5f5f5)
  // Set the text color
  > label,
  .help-block,
  .help-inline
    color: $color
  
  // Style inputs accordingly
  input, textarea, select
    color: $color
    border-color: $border-color
    &.focused,
    &:focus
      border-color: darken($border-color, 10%);
      box-shadow: 0 0 6px lighten($border-color, 20%)
      
  // Give a small background color for input-prepend/-append
  .input-prepend .add-on,
  .input-append .add-on
    color: $color
    background-color: $background-color
    border-color: $border-color

// Error
.control-group.error
  form-field-state(#b94a48, #ee5f5b, lighten(#ee5f5b, 30%))

// Warning
.control-group.warning
  form-field-state(#c09853, #ccae64, lighten(#CCAE64, 5%))
  
// Success
.control-group.success
  form-field-state(#468847, #57a957, lighten(#57a957, 30%))

// HTML5 invalid states
// Shares styles with the .control-group.error above
input, textarea, select
  &:focus:required:invalid
    color: #b94a48
    border-color: #ee5f5b
    &:focus
      border-color: darken(#ee5f5b, 10%)
      box-shadow: 0 0 6px lighten(#ee5f5b, 20%)

// FORM ACTIONS
// ------------

.form-actions
  padding: $base-line-height 20px $base-line-height
  margin-top: $base-line-height
  margin-bottom: $base-line-height
  background-color: #f5f5f5
  border-top: 1px solid #ddd

// For text that needs to appear as an input but should not be an input
.uneditable-input
  display: block
  background-color: #fff
  border-color: #eee
  box-shadow: inset 0 1px 2px rgba(0,0,0,.025)
  cursor: not-allowed

// Placeholder text gets special styles; can't be bundled together though for some reason
//.placeholder(#ccc)

// Help text

.help-block
  margin-top: 5px
  margin-bottom: 0
  color: #ccc

.help-inline
  display: inline-block
  margin-bottom: 9px
  vertical-align: middle
  padding-left: 5px

// Input groups

// Allow us to put symbols and text within the input field for a cleaner look
.input-prepend,
.input-append
  @extend .clearfix
  margin-bottom: 5px
  
  input,
  .uneditable-input
    border-radius: 0 $base-border-radius $base-border-radius 0
    
  .uneditable-input
    border-left-color: #ccc

  .add-on
    float: left
    display: block
    width: auto
    min-width: 16px
    height: $base-line-height
    margin-right: -1px
    padding: 4px 4px 4px 5px
    font-weight: normal
    line-height: $base-line-height
    color: #ccc
    text-align: center
    text-shadow: 0 1px 0 #fff
    background-color: #f5f5f5
    border: 1px solid #ccc
    border-radius: $base-border-radius 0 0 $base-border-radius
 
  .active
    background-color: lighten(green, 30)
    border-color: green

.input-prepend
  .add-on
    *margin-top: 1px /* IE6-7 */

.input-append
  input,
  .uneditable-input
    float: left
    border-radius: $base-border-radius 0 0 $base-border-radius

  .uneditable-input
    border-right-color: #ccc
    
  .add-on
    margin-right: 0
    margin-left: -1px
    border-radius: 0 $base-border-radius $base-border-radius 0

// Search form
.search-query 
  padding-left: 14px
  padding-right: 14px
  margin-bottom: 0 // remove the default margin on all inputs
  border-radius: ($base-border-radius * 4)

// Horizontal & vertical forms

// Common properties
.form-search,
.form-inline,
.form-horizontal
  input,
  textarea,
  select,
  .uneditable-input,
  .help-inline
    display: inline-block
    margin-bottom: 0

.form-search label,
.form-inline label
  display: inline-block

// Margin to space out fieldsets
.control-group
  margin-bottom: ($base-line-height / 2)

// Horizontal-specific styles
.form-horizontal
  // Increase spacing between groups
  .control-group
    margin-bottom: $base-line-height

  // Float the labels left
  .control-group > label
    float: left
    width: 140px
    padding-top: 5px
    text-align: right

  // Move over all input controls and content
  .controls
    margin-left: 160px

  // Move over buttons in .form-actions to align with .controls
  .form-actions
    padding-left: 160px